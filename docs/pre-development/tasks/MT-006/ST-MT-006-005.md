# ST-006-05: Enhanced Task Management API Endpoints

**Parent Task**: MT-006 - Server-Side AI Integration and HTTP API Foundation  
**Duration**: 3 hours  
**Type**: API Development

## Overview
Implement comprehensive task management API endpoints that support all CLI operations with enhanced filtering, sorting, and batch operations.

## Scope
- Create core task CRUD endpoints (GET, POST, PATCH, DELETE)
- Implement advanced filtering and sorting capabilities
- Add batch operations for multiple tasks
- Create task search with complex queries
- Implement task status workflow management
- Add task assignment and ownership features
- Setup task audit trail and history

## Technical Requirements
- RESTful task endpoints with proper HTTP methods
- Query parameter support for filtering and sorting
- Batch operation endpoints for efficiency
- Full-text search with pagination
- Task status state machine validation
- Task ownership and permission checking
- Audit logging for all task operations

## Acceptance Criteria
- [ ] All task CRUD operations work correctly
- [ ] Filtering supports multiple criteria (status, priority, repository)
- [ ] Sorting works on all relevant fields
- [ ] Batch operations handle multiple tasks efficiently
- [ ] Search functionality provides relevant results
- [ ] Task status transitions are properly validated
- [ ] Audit trail captures all changes with timestamps
- [ ] API response time <50ms for simple operations

## Files to Create/Modify
- `internal/api/handlers/tasks_crud.go` - Task CRUD operations
- `internal/api/handlers/tasks_search.go` - Task search functionality
- `internal/api/handlers/tasks_batch.go` - Batch operations
- `internal/tasks/service.go` - Task business logic
- `internal/tasks/filter.go` - Filtering and sorting
- `internal/tasks/workflow.go` - Status workflow
- `internal/tasks/audit.go` - Audit trail
- `internal/storage/task_repository.go` - Task data access

## Dependencies
- HTTP API foundation (ST-006-01)
- Database schema
- Authentication system
- Audit logging infrastructure

## Testing Requirements
- Unit tests for all CRUD operations
- Integration tests with database
- Performance tests with large datasets
- Batch operation validation
- Search functionality testing

## Success Metrics
- API response time <50ms p95
- Search accuracy >95%
- Batch operation efficiency >90%
- Status transition validation 100%